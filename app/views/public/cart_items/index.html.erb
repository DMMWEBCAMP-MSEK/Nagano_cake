<div>ショッピングカート</div>


<div class="field col-sm-12 text-right mt-2">
  <%= link_to "カートを空にする", destroy_all_cart_items_path, method: :delete, class: "btn btn-danger" %>
</div>

<table class="table table-bordered">
  <thead class="thead-dark">
      <th>商品名</th>
      <th>単価(税込)</th>
      <th>数量</th>
      <th>小計</th>
      <th></th>
  </thead>

  <% @cart_items.each do |cart_item| %>

  <tbody>
      <tr>
        <td>
          <%= image_tag cart_item.item.image, size: "50x50" %>
          <%= cart_item.item.name %>
        </td>
        <td>
          <%= cart_item.item.with_tax_price.to_s(:delimited) %>
        </td>
        <td>
          <%= form_with model: cart_item, url: cart_item_path(@cart_items), local: true, method: :patch do |f| %>
          <%= f.number_field :amount, min: 1, max:10, id: "amount_cart" %>
          <%= f.submit "変更",class: "btn btn-success" %>
          <% end %>
          <%#= cart_item.amount %>
          <%#= f.select :amount, options_for_select((1..10).to_a), include_blank: "個数選択" %>
        </td>
        <td>
          <%= cart_item.subtotal.to_s(:delimited) %>
        </td>
        <td>
          <%= link_to "削除する", cart_item_path(cart_item.id), method: :delete, class: "btn btn-sm btn-danger" %>
      </tr>
  </tbody>

  <% end %>

</table>

<table class="table table-bordered">
  <thead class="thead-dark">
    <tr>
     <th>
      合計金額
     </th>
    </tr>
  </thead>
  <tbody>
    <tr>
     <td>
       <%= @total.to_s(:delimited, delimiter: ',') %>
     </td>
    </tr>
  </tbody>
</table>

  <%= form_with model: @order, url: new_order_path(@order), method: :get, local:true do |f| %>

  <%= f.submit "情報入力へ進む", class: "btn btn-success" %>

  <% end %>

<%= link_to '買い物を続ける', items_path, class: "btn btn-primary" %>



